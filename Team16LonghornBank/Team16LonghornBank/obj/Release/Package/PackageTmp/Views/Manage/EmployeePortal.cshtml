@model Team16LonghornBank.Models.EmployeePortalViewModel

@{
    ViewBag.Title = "EmployeePortal";
}

@if (User.IsInRole("Employee"))
{
    <h2>Employee Portal</h2>
    <br />

    @Html.ActionLink("View All Transactions", "Index", "Transactions", null, new { @class = "btn btn-primary" })
    <h3>Customers</h3>
    <table class="table">
        <tr>
            <th>
                First Name
            </th>
            <th>
                Last Name
            </th>
            <th>
                Email
            </th>
            <th>
                Is this customer active?
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model.Customers)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.FirstName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.LastName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Email)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.IsActive)
                </td>
                <td>
                    @Html.ActionLink("Edit", "EditCustomer", new { id = item.Id }) |
                    @Html.ActionLink("Change Password", "ChangeUserPassword", "Manage", new { id = item.Id }, null)
                </td>
            </tr>
        }
        </table>
}

else
{
    <h2>Manager Portal</h2>
    <br />

    @Html.ActionLink("View All Transactions", "Index", "Transactions", null, new { @class = "btn btn-primary" })
    @Html.ActionLink("View All Disputes", "Index", "Disputes", null, new { @class = "btn btn-info" })
    @Html.ActionLink("View all stocks", "Index", "Stocks", null, new { @class = "btn btn-success" })
    @Html.ActionLink("Process Stock Portfolios", "ProcessStockPortfolios", "StockPortfolios", null, new { @class = "btn btn-warning" })

    <h3>Customers</h3>
    <table class="table">
        <tr>
            <th>
                First Name
            </th>
            <th>
                Last Name
            </th>
            <th>
                Email
            </th>
            <th>
                Is this customer active?
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model.Customers)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.FirstName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.LastName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Email)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.IsActive)
                </td>
                <td>
                    @Html.ActionLink("Edit", "EditCustomer", new { id = item.Id }) |
                    @Html.ActionLink("Change Password", "ChangeUserPassword", "Manage", new { id = item.Id }, null)
                </td>
            </tr>
        }
    </table>
    <br />

    @Html.ActionLink("Create an employee", "CreateEmployee", "Manage", null, new { @class = "btn btn-primary" })
    <h3>Employees</h3>
    <table class="table">
        <tr>
            <th>
                First Name
            </th>
            <th>
                Last Name
            </th>
            <th>
                Email
            </th>
            <th>
                Is this employee terminated?
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model.Employees)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.FirstName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.LastName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Email)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.IsTerminated)
                </td>
                <td>
                    @Html.ActionLink("Edit", "EditEmployee", new { id = item.Id }) |
                    @Html.ActionLink("Change Password", "ChangeUserPassword", "Manage", new { id = item.Id }, null)
                </td>
            </tr>
        }
    </table>
    <br />

    @Html.ActionLink("Create a manager", "CreateManager", "Manage", null, new { @class = "btn btn-primary" })
    <h3>Managers</h3>
    <table class="table">
        <tr>
            <th>
                First Name
            </th>
            <th>
                Last Name
            </th>
            <th>
                Email
            </th>
            <th>
                Is this manager terminated?
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model.Managers)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.FirstName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.LastName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Email)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.IsTerminated)
                </td>
                <td>
                    @Html.ActionLink("Edit", "EditEmployee", new { id = item.Id }) |
                    @Html.ActionLink("Change Password", "ChangeUserPassword", "Manage", new { id = item.Id }, null)
                </td>
            </tr>
        }
    </table>
    <br />

    <h3>Pending Transactions</h3>
    <table class="table">
        <tr>
            <th>
                Transaction ID
            </th>
            <th>
                Transaction Type
            </th>
            <th>
                Transaction Date
            </th>
            <th>
                Amount
            </th>
            <th>
                Description
            </th>
            <th>
                Pending?
            </th>
            <th></th>
        </tr>

        @foreach(var item in Model.PendingTransactions)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.TransactionID)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TransactionType)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TransactionDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Amount)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Description)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.isPending)
                </td>
                <td>
                    @Html.ActionLink("Approve", "ApproveTransaction", "Transactions", new { id = item.TransactionID }, new { @class = "btn btn-success" })
                    @Html.ActionLink("Decline", "Delete", "Transactions", new { id = item.TransactionID }, new { @class = "btn btn-danger" })
                </td>
            </tr>
        }
    </table>
    <br />

    <h3>Pending Stock Portfolios</h3>
    <table class="table">
        <tr>
            <th>
                Account Number
            </th>
            <th>
                Stock Portfolio Name
            </th>
            <th>
                Customer
            </th>
            <th>
                Pending?
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model.PendingStockPortfolios)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.AccountNumber)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.AccountName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Customer.Email)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.isPending)
                </td>
                <td>
                    @Html.ActionLink("Approve", "ApproveStockPortfolio", "StockPortfolios", new { id = item.StockPortfolioID }, new { @class = "btn btn-success" })
                </td>
            </tr>
        }
    </table>
    <br />

    <h3>Disputes</h3>
    <table class="table">
        <tr>
            <th>
                Dispute ID
            </th>
            <th>
                Dispute Comments
            </th>
            <th>
                Correct Amount
            </th>
            <th>
                Delete this transaction?
            </th>
            <th>
                Current Status
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model.Disputes)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.DisputeID)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DisputeComments)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CorrectAmount)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DeleteTransaction)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CurrentStatus)
                </td>
                <td>
                    @Html.ActionLink("Resolve Dispute", "ResolveDispute", "Disputes", new { id = item.DisputeID }, new { @class = "btn btn-default" })
                </td>
            </tr>
        }
    </table>
}

